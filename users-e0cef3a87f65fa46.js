(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2892],{66249:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return l(97176)}])},15468:function(e,s,l){"use strict";l.d(s,{Z:function(){return u}});var a=l(85893),t=l(67294),n=l(90044),r=l(2914),i=l(48759),c=l.n(i);(0,n.jG)("solarized",{text:{primary:"var(--text)",secondary:"var(--secondary)"},highlightOnHover:{default:"var(--background)",text:"var(--text)"},background:{default:"var(--shape)",text:"var(--text)"},striped:{default:"var(--shape)",text:"var(--text)"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"var(--background)"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}},"light");let o=e=>{let{filterText:s,onFilter:l,onClear:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("fieldset",{className:c().filterBox,children:[(0,a.jsx)("label",{children:" Pesquisar"}),(0,a.jsx)("input",{id:"search",type:"search",placeholder:"Encontre na Tabela","aria-label":"Pesquisar",className:"legacyField ".concat(c().filterInput),value:s,onChange:l})]})})},d=(e,s,l)=>!!s.map(s=>s.selector(e)).find(e=>e&&String(e).toLowerCase().includes(l.toLowerCase()));var u=e=>{let{columns:s,data:l,exportable:i,selectable:c,pagination:u,isFilterable:m=!1}=e,[h,_]=t.useState(""),[p,x]=t.useState(!1),f=null==l?void 0:l.filter(e=>d(e,s,h)),v=t.useMemo(()=>(0,a.jsxs)("button",{className:"green",onClick:()=>(function(e,s){let l;let a=document.createElement("a"),t=(l=""+s.map(e=>e.name).join(";")+"\n",e.forEach(e=>{l+=s.map(s=>s.selector(e)).join(";")+"\n"}),l);null!=t&&(t.match(/^data:text\/csv/i)||(t="data:text/csv;charset=utf-8,".concat(t)),a.setAttribute("href",encodeURI(t)),a.setAttribute("download","export.csv"),a.click())})(l,s),children:[(0,a.jsx)(r.l7t,{}),"Exportar CSV"]}),[]),j=t.useMemo(()=>(0,a.jsx)(o,{onFilter:e=>_(e.target.value),onClear:()=>{h&&(x(!p),_(""))},filterText:h}),[h,p]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.ZP,{columns:s,data:f,theme:"solarized",selectableRows:c,subHeader:m,subHeaderComponent:j,persistTableHead:!0,striped:!0,actions:i?v:null,pagination:u,paginationComponentOptions:{rowsPerPageText:"Itens por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"}})})}},10448:function(e,s,l){"use strict";var a=l(85893),t=l(67294),n=l(12332);s.Z=(0,t.forwardRef)(e=>{let{children:s,isChanging:l,...t}=e;return l?(0,a.jsx)("button",{...t,disabled:!0,children:(0,a.jsx)(n.s,{})}):(0,a.jsx)("button",{...t,children:s})})},82592:function(e,s,l){"use strict";var a=l(85893),t=l(80452),n=l(67294),r=l(31567),i=l(50910),c=l(50343),o=l(47157),d=l.n(o);let u=(0,c.ZP)(),m={borderRadius:4,backgroundColor:"var(--shape)",height:"2.5rem",colors:{text:"var(--text)",primary:"var(--shape-dark)",primary75:"var(--shape)",primary50:"var(--shape)",primary25:"var(--shape-dark)",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"var(--background)",neutral5:"var(--shape-dark)",neutral10:"var(--shape)",neutral20:"var(--shape-dark)",neutral30:"var(--shape)",neutral40:"var(--shape)",neutral50:"var(--shape)",neutral60:"var(--shape)",neutral70:"var(--shape)",neutral80:"var(--shape-dark)",neutral90:"var(--shape-dark)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}};s.Z=(0,n.forwardRef)((e,s)=>{let{defaultValue:l,title:n,isMulti:c=!1,errors:o,description:h,options:_,onChange:p,rest:x}=e,{t:f}=(0,r.$)("components_theme_form_dynamic_select");return(0,a.jsxs)("fieldset",{className:d().selectContainer,children:[n&&(0,a.jsx)("label",{children:n}),(0,a.jsx)(i.ZP,{noOptionsMessage:()=>f("noOptionsMessage"),closeMenuOnSelect:!0,components:u,defaultValue:l,isMulti:c,placeholder:f("placeholder"),options:_,onChange:p,theme:m,ref:s,...x}),h&&(0,a.jsx)("small",{className:d().description,children:h}),o&&(0,a.jsx)(t._,{errors:o})]})})},80452:function(e,s,l){"use strict";l.d(s,{_:function(){return o}});var a=l(85893),t=l(8598),n=l.n(t);l(67294);var r=l(31567),i=l(47037),c=l.n(i);let o=e=>{var s,l,t,i,o;let{errors:d}=e,{t:u}=(0,r.$)("validation");if((null==d?void 0:d.message)===void 0)return null;let m=(null==d?void 0:null===(s=d.message)||void 0===s?void 0:s.key)!==void 0,h="";return c()(d.message)?h=d.message:m&&void 0!==d.type&&(h=u(d.message.key,{[d.type]:null==d?void 0:null===(t=d.message)||void 0===t?void 0:null===(l=t.values)||void 0===l?void 0:l[d.type],suffix:null==d?void 0:null===(o=d.message)||void 0===o?void 0:null===(i=o.values)||void 0===i?void 0:i.suffix})),(0,a.jsx)("div",{className:n().errorContainer,children:(0,a.jsx)("span",{className:n().error,children:u(String(h))})})}},25816:function(e,s,l){"use strict";var a=l(85893),t=l(67294),n=l(13246),r=l(61337),i=l(76627),c=l.n(i),o=l(24762),d=l(63029),u=l.n(d),m=l(80452);s.Z=(0,t.forwardRef)((e,s)=>{let{title:l,callback:i,noMargin:d=!1,type:h,description:_=null,defaultValue:p,errors:x,outsideRef:f,badge:v,link:j,mask:b,icon:g,...y}=e,[N,C]=(0,t.useState)((0,a.jsx)(r.gxi,{})),[k,Z]=(0,t.useState)(!1),[w,S]=(0,t.useState)(h);return(0,t.useEffect)(()=>{"password"===h&&(k?(C((0,a.jsx)(r.ilU,{})),S("text")):(C((0,a.jsx)(r.gxi,{})),S("password")))},[k]),(0,a.jsxs)("fieldset",{className:"".concat(u().inputContainer," ").concat(d&&u().noMargin," ").concat("hidden"===h&&u().hidden),children:[l&&(0,a.jsxs)("label",{children:[l,"  ",j&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("sup",{children:[" ",j," "]})}),"   ",v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("sup",{"data-tip":v,children:[" ",(0,a.jsx)(n.znh,{})]})," ",(0,a.jsx)(o.default,{})," "]}),"  "]}),(0,a.jsxs)("span",{className:"".concat(u().input," ").concat((g||"password"===h)&&u().icon),children:[b?(0,a.jsx)(c(),{...y,mask:b,ref:s,defaultValue:p,placeholder:" ",type:w,className:"legacyField ".concat(y.className)}):(0,a.jsx)("input",{...y,defaultValue:p,className:"legacyField ".concat(y.className),onChange:e=>i&&i(e.target.value),type:w,ref:s}),g&&"password"!=h&&g,"password"===h&&(0,a.jsx)("a",{href:"#",className:u().showPassword,onClick:()=>Z(!k),children:N})]}),_&&(0,a.jsx)("small",{className:u().description,children:_}),x&&(0,a.jsx)(m._,{errors:x})]})})},92574:function(e,s,l){"use strict";var a=l(85893),t=l(67294),n=l(87122),r=l.n(n),i=l(80452),c=l(24762);s.Z=(0,t.forwardRef)((e,s)=>{let{options:l,name:n,title:o,errors:d,callback:u,defaultValue:m,v2:h,..._}=e,[p,x]=(0,t.useState)(l),f=e=>{x(l.map(s=>(e.value===s.value?s.checked=!0:delete s.checked,s))),p.find(e=>!0===e.checked),u&&u(e.value)};return(0,t.useEffect)(()=>{x(l.map(e=>(m===e.value?e.checked=!0:delete e.checked,e)))},[l]),(0,a.jsxs)("fieldset",{className:r().container,children:[o&&(0,a.jsx)("p",{className:h?r().pV2:"",children:o}),(0,a.jsxs)("div",{className:"".concat(r().radioGroupContainer),children:[p.map((e,s)=>{let{title:l,value:t,checked:i,badge:o}=e;return(0,a.jsxs)("div",{"data-tip":o,className:r().radioGroupOption,children:[(0,a.jsx)("input",{type:"radio",id:"radioOption_".concat(n,"_").concat(s),..._,className:"legacyField ".concat(_.className),onClick:()=>f(e),defaultChecked:m===t,name:n,value:String(t)}),(0,a.jsxs)("label",{htmlFor:"radioOption_".concat(n,"_").concat(s),children:[" ",l," "]}),(0,a.jsx)(c.default,{})]},s)}),d&&(0,a.jsx)(i._,{errors:d})]})]})})},65150:function(e,s,l){"use strict";var a=l(85893),t=l(80452),n=l(67294),r=l(31567),i=l(87110),c=l.n(i);s.Z=n.forwardRef((e,s)=>{var l;let{name:n,title:i,options:o,selected:d,callback:u,errors:m=null,placeholder:h,isMulti:_=!1,noMargin:p,hideDefaultOption:x=!1,noValueDefault:f=!1,...v}=e,{t:j}=(0,r.$)("components_Theme_Form_Select"),b=e=>{u&&u(e)};return(0,a.jsxs)("fieldset",{className:c().selectContainer,children:[i&&(0,a.jsx)("label",{children:i}),(0,a.jsxs)("select",{...v,onChange:e=>{b({value:e.target.value}.value)},name:n,value:null==d?void 0:d.value,defaultValue:null!==(l=null==d?void 0:d.value)&&void 0!==l?l:f?"":-1,ref:s,className:"".concat(p?c().selectMargin:c().select),children:[!x&&(0,a.jsx)("option",{value:f?"":-1,disabled:!0,children:null!=h?h:j("placeholder")}),null==o?void 0:o.map((e,s)=>(0,a.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},"option_".concat(s)))]}),m&&(0,a.jsx)(t._,{errors:m})]})})},64878:function(e,s,l){"use strict";var a=l(85893),t=l(41664),n=l.n(t),r=l(5642),i=l(10448),c=l(31185),o=l.n(c);s.Z=e=>{let{icon:s,title:l,description:t,links:c,className:d,margin:u,secondDescription:m,callback:h,button:_,...p}=e;return(0,a.jsxs)("div",{className:"".concat(o().box," ").concat(d||""),...p,children:[s&&(0,a.jsx)("div",{className:o().icon,children:s}),(0,a.jsxs)("div",{className:o().content,children:[(0,a.jsx)("strong",{children:l}),t&&(0,a.jsx)("p",{children:t}),m&&(0,a.jsx)("p",{children:m}),_&&(0,a.jsx)("div",{className:o().links,children:(0,a.jsxs)(i.Z,{className:"danger",onClick:()=>h&&h(_.title),children:[" ",_.title," ",(0,a.jsx)(r.xll,{})]})}),c&&(0,a.jsx)("div",{className:o().links,children:c.map((e,s)=>(null==e?void 0:e.external)?(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.title," ",(0,a.jsx)(r.xll,{})]},s):(0,a.jsxs)(n(),{href:e.url,children:[" ",e.title," ",(0,a.jsx)(r.xll,{})]},s))})]})]})}},88409:function(e,s,l){"use strict";var a=l(85893),t=l(44173),n=l(61179),r=l.n(n),i=l(31567);s.Z=e=>{var s;let{pagination:l,callback:n}=e,{t:c}=(0,i.$)("components_Theme_Pagination"),o=e=>e.split("?page=")[1],d=e=>{e&&"string"==typeof e?n(o(e)):e&&"number"==typeof e&&n(e)};return(null==l?void 0:null===(s=l.links)||void 0===s?void 0:s.length)==3?null:(0,a.jsx)("ul",{className:r().paginationContainer,children:null==l?void 0:l.links.map((e,s)=>{switch(s){case 0:return(0,a.jsxs)("span",{className:r().firstLast,children:[(0,a.jsx)("li",{onClick:()=>d(1!==l.current_page?1:null),className:"".concat(1!==l.current_page?"":r().disabled),children:c("pagination.firstPage")},"first_".concat(s)),(0,a.jsx)("li",{onClick:()=>d(e.url),className:"".concat(1!==l.current_page?"":r().disabled),children:(0,a.jsx)(t.URD,{})},"".concat(s))]},"previous_span_".concat(s));case l.links.length-1:return(0,a.jsxs)("span",{className:r().firstLast,children:[(0,a.jsx)("li",{onClick:()=>d(e.url),className:"".concat(e.url?"":r().disabled),children:(0,a.jsx)(t.ZC5,{})},s),(0,a.jsx)("li",{onClick:()=>d(l.last_page),className:"".concat(e.url?"":r().disabled),children:c("pagination.lastPage")},"last_".concat(s))]},"next_span_".concat(s));default:return(0,a.jsx)("li",{onClick:()=>d(e.url),className:"".concat(e.active?r().active:""),children:e.label.replaceAll("&laquo;","").replaceAll("&raquo;","")},s)}})})}},92882:function(e,s,l){"use strict";var a=l(85893);l(67294);var t=l(544),n=l.n(t),r=l(31567);s.Z=e=>{let{completed:s=20,label:l=!0}=e,{t}=(0,r.$)("components_Theme_Progress_Bar");return(0,a.jsxs)("div",{className:n().progress,children:[(0,a.jsx)("span",{style:{width:"".concat(s,"%")}}),l&&(0,a.jsxs)("small",{children:[isNaN(Number(s))?0:Number(s),"% ",t("completed")]})]})}},97176:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return eB}});var a,t=l(85893),n=l(41664),r=l.n(n),i=l(65841),c=l(11163),o=l(24762),d=l(68070),u=l(19101),m=l(34052),h=l(64749),_=l(58213),p=l(31567),x=l(44173),f=l(94050),v=l(67294),j=l(2914),b=l(55925),g=l(29444),y=l(65680),N=l(54077),C=l.n(N),k=e=>{let{data:s,columns:l}=e,[a,n]=(0,v.useState)(s),[r,i]=(0,v.useState)("");return(0,v.useEffect)(()=>{let e="";l.map(s=>{var l;e+="".concat(null!==(l=s.width)&&void 0!==l?l:"1fr"," ")}),i(e)},[]),(0,t.jsx)("div",{className:C().tableContainer,children:(0,t.jsxs)("table",{className:C().table,children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{style:{gridTemplateColumns:r},children:l.map((e,s)=>(0,t.jsx)("th",{className:"".concat(e.buttons?C().button:""),children:e.label},s))})}),(0,t.jsx)("tbody",{children:a.map((e,s)=>(0,t.jsx)("tr",{style:{gridTemplateColumns:r},children:l.map((s,l)=>(0,t.jsx)("td",{"data-title":s.label,className:"".concat(s.buttons?C().button:""),children:s.render(e)},l))},s))})]})})},Z=l(10448),w=l(31460),S=l(88409),A=l(90505),M=l.n(A),L=e=>{let{title:s,name:l,...a}=e;return(0,t.jsxs)("fieldset",{className:"".concat(M().inputContainer),children:[(0,t.jsx)("input",{...a,type:"checkbox",name:l,className:"legacyField ".concat(a.className)}),(0,t.jsxs)("label",{children:[s," "]})]})},T=l(77331),E=l(97087),F=l(32166),P=l(20818),U=l(89014),I=l(17994),O=l(17853),B=l(25816),D=l(92574),R=l(65150),V=l(9158),z=l(71222),q=l(87536),H=l(13246),Y=l(72132),$=()=>{var e;let{t:s}=(0,p.$)("components_Users_List_Filters"),l=(0,c.useRouter)(),{portals:a,fetch:n}=(0,V.V)(),{classRooms:r,setClassRooms:i,fetch:o}=(0,z.Q)(),[m,h]=(0,v.useState)([]),[_,x]=(0,v.useState)([]),{register:f,handleSubmit:j,watch:b,setValue:y,formState:{errors:N}}=(0,q.cI)(),C=e=>{"-1"!=e?o(e):(i([]),y("classroom",""))},k=e=>{y("filter_type",e),"portal_and_classrooms"===e&&(l.replace("/users",void 0,{shallow:!0}),n(!0)),l.replace("/users",void 0,{shallow:!0})};return(0,v.useEffect)(()=>y("filter_type","name_or_email"),[]),(0,v.useEffect)(()=>{a.length>0&&h([{label:s("all"),value:-1}].concat(a.map(e=>({label:e.name,value:e.id}))))},[a,s]),(0,v.useEffect)(()=>{(null==r?void 0:r.length)>0?x([{label:s("all"),value:-1}].concat(r.map(e=>({label:e.name,value:Number(e.id)})))):x([])},[r,s]),(0,t.jsxs)(g.Z,{children:[(0,t.jsx)("h1",{children:s("filtersTitle")}),(0,t.jsx)("form",{onSubmit:j((e,a)=>{switch(a.preventDefault(),e.filter_type){case"name_or_email":e.classroom="",e.portal="",e.email_failed="",e.order="";break;case"portal_and_classrooms":e.search="",e.email_failed="",e.order="";break;case"email_failed":e.classroom="",e.portal="",e.order="",e.search="";break;case"order_by":if(e.classroom="",e.portal="",e.search="",e.email_failed="",""===e.order){Y.Am.error(s("selectOrder"));return}e.order_by=e.order,delete e.order}let t=new URLSearchParams(e),n=[];t.forEach((e,s)=>{""==e&&n.push(s),"-1"==e&&n.push(s),"undefined"==e&&n.push(s)}),n.forEach(e=>{t.delete(e)}),l.push("/users?".concat(t.toString()))}),children:(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(d.Z,{md:12,children:(0,t.jsx)(D.Z,{...f("filter_type"),name:"filter_type",title:s("selectFilterType"),errors:N.filter_type,options:[{title:s("nameOrEmail"),value:"name_or_email"},{title:s("portalAndClass"),value:"portal_and_classrooms"},{title:s("failedEmails"),value:"email_failed"},{title:s("orderBy"),value:"order_by"}],callback:e=>k(e),defaultValue:null!==(e=b("filter_type"))&&void 0!==e?e:"name_or_email"})}),"name_or_email"===b("filter_type")&&(0,t.jsx)(d.Z,{md:12,children:(0,t.jsx)(B.Z,{title:s("nameOrEmail"),...f("search")})}),"portal_and_classrooms"===b("filter_type")&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{md:6,children:(0,t.jsx)(R.Z,{title:s("selectPortal"),options:m,...f("portal"),callback:e=>C(e)})}),(0,t.jsx)(d.Z,{md:6,children:(0,t.jsx)(R.Z,{title:s("selectClass"),...f("classroom"),callback:e=>y("classroom",e),options:_})})]}),"email_failed"===b("filter_type")&&(0,t.jsx)(d.Z,{md:12,children:(0,t.jsx)(F.Z,{title:s("onlyFailedEmails"),...f("email_failed"),values:{checked:!0,unchecked:!1},callback:e=>y("email_failed",e),defaultValue:!0})}),"order_by"===b("filter_type")&&(0,t.jsx)(d.Z,{md:12,children:(0,t.jsx)(R.Z,{title:s("selectOrder"),...f("order"),noValueDefault:!0,callback:e=>y("order",e),options:[{label:s("allFields"),value:"-1"},{label:s("recentFirst"),value:"desc"},{label:s("oldestFirst"),value:"asc"}]})}),(0,t.jsx)(d.Z,{md:12,children:(0,t.jsxs)(Z.Z,{className:"primary mt-3",children:[(0,t.jsx)(H.FNs,{})," ",s("filter")]})})]})})]})},G=l(64878),K=l(92882),Q=l(66304),W=l(7258);Q.ZP.setDefaultNamespace("contexts_AuthContext");let J=e=>W.string().min(8,e("password.min",{ns:"contexts_AuthContext"})).matches(/[0-9]/g,e("password.number",{ns:"contexts_AuthContext"})).matches(/[A-Z]/g,e("password.uppercase",{ns:"contexts_AuthContext"})).matches(/[a-z]/g,e("password.lowercase",{ns:"contexts_AuthContext"})).matches(/(?=.*[!@#$%^&*_-])/,e("password.special",{ns:"contexts_AuthContext"})).required(e("password.required",{ns:"contexts_AuthContext"})),X=e=>W.object().shape({password:J(e),password_confirmation:J(e).oneOf([W.ref("password"),null],e("password.confirmation",{ns:"contexts_AuthContext"}))});var ee=l(27380),es=l(47533),el=l(94357),ea=l.n(el),et=e=>{let{userId:s,setIsModalOpen:l}=e,{t:a}=(0,p.$)("components_Users_List_ManageUser_ModalChangePassword"),{formState:{errors:n},register:r,handleSubmit:i}=(0,q.cI)({resolver:(0,es.X)(X(a))});return(0,t.jsx)("form",{onSubmit:i(e=>{ee.hi.put("/users/".concat(s,"/change-user-password"),e).then(e=>{let{data:{message:s}}=e;Y.Am.success(s),l(!1)}).catch(e=>{let{response:{data:s}}=e,l=null==s?void 0:s.errors;(null==l?void 0:l.length)&&(null==l||l.map(e=>{Y.Am.error(e)}))})}),children:(0,t.jsxs)("div",{className:ea().container,children:[(0,t.jsxs)(g.Z,{alert:"warning",className:ea().card,children:[(0,t.jsx)("h4",{children:a("password.attention")}),(0,t.jsx)("p",{children:a("password.emailNotification")}),(0,t.jsx)("p",{children:a("password.producerResponsibility")})]}),(0,t.jsx)(B.Z,{...r("password"),title:a("password.newPassword"),errors:n.password,type:"password"}),(0,t.jsx)(B.Z,{...r("password_confirmation"),title:a("password.confirmPassword"),errors:n.password_confirmation,type:"password"}),(0,t.jsxs)(Z.Z,{onClick:()=>null,className:"success outline",children:[(0,t.jsx)(x.inH,{}),a("password.savePassword")]})]})})},en=l(82592),er=l(83495),ei=l(77755),ec=l(17137),eo=l(52435),ed=l(30381),eu=l.n(ed),em=l(9816),eh=l.n(em),e_=e=>{var s,l;let{index:a,changeValue:n}=e,{t:r}=(0,p.$)("components_Users_List_ManageUser_ModalDaysofAcess"),{formState:{errors:i},register:c,setValue:o}=(0,q.Gc)();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:eh().actions,children:(0,t.jsx)(B.Z,{...c("questions.".concat(a,".days_of_access")),title:r("input.accessTimeInDays"),errors:null===(l=i.questions)||void 0===l?void 0:null===(s=l[a])||void 0===s?void 0:s.days_of_access,placeholder:r("input.accessTimePlaceholder"),description:r("input.accessTimeDescription"),callback:e=>{o("questions.".concat(a,".days_of_access"),e),n(e,a)}})})})},ep=l(68604),ex=l.n(ep),ef=e=>{let{fields:s}=e,{t:l}=(0,p.$)("components_Users_List_ManageUser_Portals_DaysOfAccessTable"),[a,n]=(0,v.useState)(s),[r,i]=(0,v.useState)(!1),c=(e,s)=>{i(!0);let l=new Date(Date.now()),t="";t=a[s].added_at?a[s].added_at:l.toLocaleDateString("pt-BR"),""===e?a[s].expires_at="-":a[s].expires_at=eu()(t,"DD/MM/YYYY").add(Number(e),"days").format("DD/MM/YYYY"),a[s].days_of_access=e,n(a),setTimeout(()=>{i(!1)},100)};return r?(0,t.jsx)(E.k,{}):(0,t.jsx)("div",{className:ex().table_container,children:(0,t.jsx)(k,{data:a,columns:[{label:l("table.class"),render:e=>{let{label:s}=e;return(0,t.jsx)("h1",{className:ex().h1,children:s})},minWidth:"10rem"},{label:l("table.expiresIn"),render:e=>{let{expires_at:s}=e;return(0,t.jsx)("p",{children:null!=s?s:"-"})},minWidth:"7rem"},{label:l("table.addedBy"),render:e=>{let{added_by:s}=e;return(0,t.jsx)("p",{children:null!=s?s:"-"})},minWidth:"9rem"},{label:l("table.order"),render:e=>{let{order_hash:s}=e;return(0,t.jsx)("p",{children:null!=s?s:"-"})},width:"15rem"},{label:l("table.date"),render:e=>{let{added_at:s}=e;return(0,t.jsx)("p",{children:null!=s?s:"-"})},width:"8rem"},{label:l("table.smartInstallment"),render:e=>{let{subscription:s}=e;return(0,t.jsx)("p",{style:{display:"flex",justifyContent:"center"},children:null!==s?(0,t.jsx)(x.IPg,{}):(0,t.jsx)(H.oHP,{})})},width:"8rem"},{label:l("table.status"),render:e=>{let{order_status:s}=e;return(0,t.jsx)("p",{children:null!=s?s:"-"})},width:"8rem"},{label:l("table.accessTime"),render:e=>(0,t.jsx)(e_,{fields:a,index:a.indexOf(e),changeValue:(e,s)=>c(e,s)})}]})})},ev=l(47718),ej=l.n(ev);let eb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=[];return(e=(0,er.R1)(e)).map(e=>{if(!s.includes(e.id))return s.push(e.id),{label:e.name,value:e.id,portal_id:e.portal_id,days_of_access:e.days_of_access,expires_at:e.expires_at,added_by:e.added_by,added_at:e.added_at,created_at:e.created_at,order_hash:e.order_hash,order_status:e.order_status,subscription:e.subscription?e.subscription:null}}).filter(e=>!!e)};var eg=e=>{var s;let{user:l,setUser:a,hasChanges:n,setHasChanges:r}=e,{t:i}=(0,p.$)("components_Users_List_ManageUser_Portals"),{classRooms:c,fetch:o,isLoading:_}=(0,z.Q)(),{portals:x,fetch:f,isLoading:j,resendAccess:b,isSetting:g,resendLink:y}=(0,V.V)(),[N,C]=(0,v.useState)(!0),[k,w]=(0,v.useState)([]),[S,A]=(0,v.useState)([]),[M,L]=(0,v.useState)(null),[P,U]=(0,v.useState)(!1),[I,O]=(0,v.useState)(null===(s=l.classrooms)||void 0===s?void 0:s.map(e=>e.portal_id).flat().map(e=>{var s;return{id:e,classrooms:eb(null==l?void 0:null===(s=l.classrooms)||void 0===s?void 0:s.filter(s=>s.portal_id===e)),is_access_sent:!1}})),B=W.object().shape({questions:W.array().of(W.object().shape({days_of_access:W.number().max(2e3,"No m\xe1ximo 2000 dias").nullable().notRequired().transform(e=>[NaN,0,null,void 0].includes(e)?0:Number(e))}))}),D=(0,q.cI)({defaultValues:{questions:[]},resolver:(0,es.X)(B)}),{setValue:R,handleSubmit:H,control:$,getValues:G}=D,{fields:K,append:Q,remove:J,swap:X}=(0,q.Dq)({name:"questions",control:$}),ee=async(e,s)=>{s.preventDefault(),await ed(e.questions[0].portal_id,e.questions),U(!1)},el=()=>{C(!0),setTimeout(()=>C(!1),100)},ea=e=>!!(null==I?void 0:I.find(s=>(null==s?void 0:s.id)===e)),et=(e,s)=>{if(r(!0),s){if(0===k.filter(s=>s.portal_id===e).length){Y.Am.error(i("portal.noClassesMessage")),el();return}I.push({id:e,classrooms:[],is_access_sent:!1}),O(I),el()}else{let s=I.filter(s=>s.id!==e);if(0===s.length){Y.Am.error(i("portal.activeClientRequirement")),el();return}let t=s.map(e=>e.classrooms).flat();delete l.classrooms;let n=[];t.map(e=>n.push({id:e.value,days_of_access:""===e.days_of_access?null:Number(e.days_of_access)})),a({...l,classrooms:(0,er.R1)(n)}),O(s)}},ed=(e,s)=>{let t=(0,er.R1)([...I].filter(e=>!!e),"id"),n=I.find(s=>!!s&&(null==s?void 0:s.id)===e),i=I.findIndex(s=>!!s&&(null==s?void 0:s.id)===e);s.map(e=>e.value);let c={...n,classrooms:s.filter(e=>!!e)};t[i]=c;let o=t.map(e=>e&&e.classrooms).flat(),d=[];o.map(e=>d.push({id:e.value,days_of_access:""===e.days_of_access?null:Number(e.days_of_access)})),a({...l,classrooms:(0,er.R1)(d)}),O(t),r(!0),el()};return((0,v.useEffect)(()=>{f(!0),o(null,!0)},[]),(0,v.useEffect)(()=>{C(!0),(null==x?void 0:x.length)&&A(null==x?void 0:x.map(e=>({label:e.name,value:e.id}))),(null==c?void 0:c.length)&&w(null==c?void 0:c.map(e=>({label:e.name,value:e.id,portal_id:e.portal_id}))),C(!1)},[x,c]),N||j||_)?(0,t.jsx)(E.k,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{children:i("portal.studentAccess")}),(0,t.jsx)("div",{className:ej().portalsList,children:x.map(e=>({...e,hasAccess:ea(e.id)})).sort((0,ei.I)("-hasAccess")).map(e=>{var s,a;let r=null===(a=I.find(s=>(null==s?void 0:s.id)===(null==e?void 0:e.id)))||void 0===a?void 0:null===(s=a.classrooms.filter(s=>s.portal_id===e.id))||void 0===s?void 0:s.map(e=>({...e,days_of_access:(null==e?void 0:e.days_of_access)!=0?null==e?void 0:e.days_of_access:null}));return(0,t.jsx)("div",{className:ej().portal,children:(0,t.jsxs)(u.Z,{className:ej().portalContent,children:[(0,t.jsx)(d.Z,{xs:12,md:2,lg:2,className:ej().info,children:(0,t.jsx)("strong",{children:e.name})}),(0,t.jsx)(d.Z,{xs:12,md:8,lg:5,className:ej().classroom,children:ea(e.id)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[i("portal.classrooms")," "]}),(0,t.jsx)(en.Z,{className:ej().select,isMulti:!0,name:"class_from_portal_".concat(e.id),id:"id_class_from_portal_".concat(e.id),defaultValue:r,options:k.filter(s=>s.portal_id===e.id),onChange:s=>{ed(e.id,s)}})]})}),(0,t.jsxs)(d.Z,{className:ej().actions,children:[ea(e.id)&&(n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Z,{className:"success small outline",onClick:()=>{R("questions",r),L(e),U(!0)},children:[i("portal.accessTime")," ",(0,t.jsx)(eo.cbR,{})]}),(0,t.jsxs)(Z.Z,{disabled:!0,className:"success small outline",children:[i("portal.resendAccess")," ",(0,t.jsx)(h.DBs,{})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Z,{className:"success small outline",onClick:()=>{R("questions",r),L(e),U(!0)},children:[i("portal.accessTime")," ",(0,t.jsx)(eo.cbR,{})]}),(0,t.jsxs)(Z.Z,{className:"success small outline",isChanging:g,onClick:()=>b(e.id,l.id),children:[i("portal.resendAccess")," ",(0,t.jsx)(h.DBs,{})]}),(0,t.jsxs)(Z.Z,{className:"success small outline",onClick:()=>{y(e.id,l.id)},children:[i("portal.resendLink")," ",(0,t.jsx)(eo.JsY,{})]})]})),(0,t.jsx)(F.Z,{noMargin:!0,values:{checked:!0,unchecked:!1},className:"success",tip:i("portal.toggleAccess"),callback:s=>et(e.id,s),defaultValue:ea(e.id)})]})]})},e.id)})}),(0,t.jsx)(T.z,{title:"".concat(i("portal.accessTimeForClasses"),": ").concat(null==M?void 0:M.name),isModalOpen:P,setIsModalOpen:U,fullScreen:!0,children:(0,t.jsx)(q.RV,{...D,children:(0,t.jsxs)(ec.Z,{onSubmit:H(ee),children:[(0,t.jsx)(ef,{fields:K}),(0,t.jsxs)(Z.Z,{className:"primary mt-3",children:[i("portal.saveAccessTime")," ",(0,t.jsx)(m.Rgz,{})]})]})})})]})},ey=l(61348),eN=l.n(ey),eC=e=>{let{user:s}=e,[l,a]=(0,v.useState)(s),{getStatistics:n,statistics:r,activeToggle:c,update:o,freePass:h,verifyViewAiCreate:_,setIsModalOpen:f,isModalOpen:j}=(0,I.U)(),[b,y]=(0,v.useState)(!1),[N,C]=(0,v.useState)(!1),[k,w]=(0,v.useState)(!1),[S,A]=(0,v.useState)(!1),{t:M}=(0,p.$)("components_Users_List_ManageUser"),[L,P]=(0,v.useState)(null);(0,v.useEffect)(()=>{y(!0),n(l.id).then(()=>{y(!1)})},[]);let U=async e=>{var s;let t=null==l?void 0:null===(s=l.classrooms)||void 0===s?void 0:s.map(e=>({portal_id:e.portal_id}));a(await c(l,e,t))},O=async e=>{a(await h(l,e))},B=async()=>{C(!1);let e=[];l.classrooms.map(s=>e.push(s.id)),!0===await _(e)?(P(l),f(!0)):(C(!1),o(l.id,l).then(()=>{C(!1)}))};return b||!r?(0,t.jsx)(E.k,{}):(0,t.jsxs)("div",{className:eN().manageUserContainer,children:[(0,t.jsxs)(u.Z,{className:eN().header,children:[(0,t.jsx)(d.Z,{xs:12,sm:12,md:8,children:(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(d.Z,{sm:12,md:"auto",className:eN().user,children:[(0,t.jsx)(i.ZP,{"data-for":"tip_".concat(l.id),name:l.name,className:eN().avatar}),(0,t.jsxs)("div",{className:eN().info,children:[(0,t.jsx)("strong",{children:l.name}),(0,t.jsx)("small",{children:l.email}),(0,t.jsx)(F.Z,{values:{checked:1,unchecked:0},title:M("freePass"),callback:e=>O(e),defaultValue:l.is_free_pass})]})]}),(0,t.jsxs)(d.Z,{className:eN().statistics,children:[(0,t.jsxs)("div",{className:eN().statisticBox,children:[(0,t.jsx)("p",{children:M("lessons")}),(0,t.jsxs)("strong",{children:[r.allLessonsViewed," / ",r.allLessons]}),(0,t.jsx)(K.Z,{completed:Math.ceil(Number(r.allLessonsViewed)/Number(r.allLessons)*100)})]}),(0,t.jsxs)("div",{className:eN().statisticBox,children:[(0,t.jsx)("p",{children:M("quizzes")}),(0,t.jsxs)("strong",{children:[r.allQuizzesCompleted," / ",r.allQuizzes]}),(0,t.jsx)(K.Z,{completed:Math.ceil(Number(r.allQuizzesCompleted)/Number(r.allQuizzes)*100)})]})]})]})}),(0,t.jsxs)(d.Z,{xs:12,sm:12,md:4,className:eN().actions,children:[N?(0,t.jsxs)(Z.Z,{isChanging:k,onClick:B,className:"primary outline ".concat(eN().save," me-2"),children:[(0,t.jsx)(x.inH,{})," ",M("saveChanges")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Z,{isChanging:k,onClick:()=>A(!0),className:"primary outline me-2",children:[(0,t.jsx)(x.Ph1,{})," ",M("changePassword")]}),(0,t.jsx)(T.z,{title:M("changePassword"),isModalOpen:S,setIsModalOpen:A,children:(0,t.jsx)(et,{userId:null==l?void 0:l.id,setIsModalOpen:A})})]}),!1==!!l.userBlackList?(0,t.jsxs)(Z.Z,{onClick:()=>U(0),className:"danger outline",children:[(0,t.jsx)(H.YfK,{}),M("blockCustomer")]}):(0,t.jsxs)(Z.Z,{onClick:()=>U(1),className:"success outline",children:[(0,t.jsx)(H.YfK,{}),M("unblockCustomer")]})]})]}),(0,t.jsxs)("div",{className:eN().content,children:[(0,t.jsxs)(g.Z,{alert:"info",children:[(0,t.jsx)("h3",{children:M("notice")}),(0,t.jsx)("ul",{children:(0,t.jsxs)("li",{children:[(0,t.jsxs)("b",{children:[" ",M("whenAddingOrEditingAClass")," "]})," ",M("verifyAccessTime")," ",(0,t.jsx)("b",{children:M("defaultLifetime")}),";"]})})]}),(0,t.jsx)(eg,{hasChanges:N,setHasChanges:C,user:l,setUser:a})]}),(0,t.jsxs)(T.z,{title:M("modal.title"),fullScreen:!0,isModalOpen:j,setIsModalOpen:f,children:[(0,t.jsx)(G.Z,{icon:(0,t.jsx)(x.o86,{}),margin:!0,title:M("modal.infoBox.title"),description:M("modal.infoBox.description"),secondDescription:M("modal.infoBox.secondDescription")}),(0,t.jsxs)(Z.Z,{className:"success",onClick:()=>{o(L.id,L).then(()=>{C(!1)})},children:[" ",M("modal.button.save")," ",(0,t.jsx)(m.zy7,{})," "]})]})]})},ek=l(73922),eZ=l.n(ek),ew=l(57574),eS=l(15468),eA=e=>{let{user:s}=e,{t:l}=(0,p.$)("components_Users_List_EstatisticsUser_Access"),{accessHistory:a,paginateAccess:n,getAccessLessons:r}=(0,I.U)(),[i,c]=(0,v.useState)(1),o=e=>er.c1.filter(s=>s.label===e)[0].value,d=[{name:l("table.weekday"),selector:e=>o(e.weekday),sortable:!0},{name:l("table.browser"),selector:e=>null!==e.browser?e.browser:"-",sortable:!0},{name:l("table.platform"),selector:e=>null!==e.platform?e.platform:"-",sortable:!0},{name:l("table.dateTime"),selector:e=>e.created_at,sortable:!0}];return null===a?(0,t.jsx)(E.k,{}):(0,t.jsxs)(t.Fragment,{children:[a.length>0?(0,t.jsx)(eS.Z,{columns:d,data:a}):(0,t.jsx)(y.Z,{title:l("empty.noRecords"),subtitle:l("empty.noLogin")}),(null==n?void 0:n.current_page)!==(null==n?void 0:n.last_page)&&(0,t.jsx)(u.Z,{className:"justify-content-md-center mt-3",md:3,children:(0,t.jsxs)(Z.Z,{className:"success",onClick:()=>{let e=i+1;r(s.id,e),c(e)},children:[(0,t.jsx)(h.AIR,{}),l("loadMore")]})})]})},eM=e=>{let{user:s}=e,{t:l}=(0,p.$)("components_Users_List_EstatisticsUser_LessonsCompleted"),{completedLessons:a,paginateCompleted:n,getCompletedLessons:r}=(0,I.U)(),[i,c]=(0,v.useState)(1),o=e=>{let s="";return e.map((l,a)=>{s+="".concat(l).concat(a!==e.length-1?", ":"")}),s},d=[{name:l("table.course"),selector:e=>e.content_name,sortable:!0},{name:l("table.module"),selector:e=>e.module_name,sortable:!0},{name:l("table.lessons"),selector:e=>e.lessons_names.length>0?o(e.lessons_names):"-",sortable:!0},{name:l("table.total"),selector:e=>e.progress,sortable:!0}];return null===a?(0,t.jsx)(E.k,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eS.Z,{columns:d,data:a}),(null==n?void 0:n.current_page)!==(null==n?void 0:n.last_page)&&(0,t.jsx)(u.Z,{className:"justify-content-md-center mt-3",md:3,children:(0,t.jsxs)(Z.Z,{className:"success",onClick:()=>{let e=i+1;r(s.id,e),c(e)},children:[(0,t.jsx)(h.AIR,{}),l("loadMore")]})})]})},eL=e=>{let{user:s}=e,{t:l}=(0,p.$)("components_Users_List_EstatisticsUser_LessonsViewed"),{viewedLessons:a,paginateViewed:n,getViewedLessons:r}=(0,I.U)(),[i,c]=(0,v.useState)(1),o=[{name:l("table.course"),selector:e=>e.content_name,sortable:!0},{name:l("table.module"),selector:e=>e.module_name,sortable:!0},{name:l("table.lesson"),selector:e=>e.lesson_name,sortable:!0},{name:l("table.viewedAt"),selector:e=>eu()(e.viewed_at).format("DD/MM/YYYY HH:mm"),sortable:!0}];return null===a?(0,t.jsx)(E.k,{}):(0,t.jsxs)(t.Fragment,{children:[a.length>0?(0,t.jsx)(eS.Z,{columns:o,data:a}):(0,t.jsx)(y.Z,{title:l("empty.noRecords"),subtitle:l("empty.noViewedLessons")}),(null==n?void 0:n.current_page)!==(null==n?void 0:n.last_page)&&(0,t.jsx)(u.Z,{className:"justify-content-md-center mt-3",md:3,children:(0,t.jsxs)(Z.Z,{className:"success",onClick:()=>{let e=i+1;r(s.id,e),c(e)},children:[(0,t.jsx)(h.AIR,{}),l("loadMore")]})})]})},eT=e=>{let{user:s}=e,{t:l}=(0,p.$)("components_Users_List_EstatisticsUser"),[a]=(0,v.useState)(s),{getStatisticsUser:n}=(0,I.U)(),[r,i]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{i(!0),n(a.id).then(()=>{i(!1)})},[]),r)?(0,t.jsx)(E.k,{}):(0,t.jsxs)(ew.Z,{flush:!0,defaultActiveKey:"1",style:{margin:0},children:[(0,t.jsxs)(ew.Z.Item,{eventKey:"1",children:[(0,t.jsx)(ew.Z.Header,{children:l("accordion.completedLessons",{total:null==a?void 0:a.completed_lessons})}),(0,t.jsx)(ew.Z.Body,{children:(0,t.jsx)(eM,{user:s})})]}),(0,t.jsxs)(ew.Z.Item,{eventKey:"2",children:[(0,t.jsx)(ew.Z.Header,{children:l("accordion.viewedLessons",{total:null==a?void 0:a.viewedLessonsTotal})}),(0,t.jsx)(ew.Z.Body,{children:(0,t.jsx)(eL,{user:s})})]}),(0,t.jsxs)(ew.Z.Item,{eventKey:"3",children:[(0,t.jsx)(ew.Z.Header,{children:l("accordion.access",{total:null==a?void 0:a.totalAccess})}),(0,t.jsx)(ew.Z.Body,{children:(0,t.jsx)(eA,{user:s})})]})]})},eE=l(12332),eF=l(39595),eP=l(2800),eU=l.n(eP),eI=e=>{var s;let{selectedUsers:l,closeModal:a,isEveryUserSelected:n=!1}=e,{t:r}=(0,p.$)("components_Users_List_ManageUser_LinkMany"),{addMembers:i,isSetting:c}=(0,I.U)(),{portals:o,fetch:m}=(0,V.V)(),{classRooms:h,setClassRooms:_,fetch:x,isLoading:f}=(0,z.Q)(),[b,y]=(0,v.useState)([]),[N,C]=(0,v.useState)([]),{register:k,handleSubmit:w,watch:S,setValue:A,control:M,resetField:L,formState:{errors:T}}=(0,q.cI)(),{fields:E,append:F,remove:P}=(0,q.Dq)({control:M,name:"classrooms"}),[U,O]=(0,v.useState)(!1),D=S("classrooms"),H=E.length-1;(0,v.useEffect)(()=>{m()},[]),(0,v.useEffect)(()=>{let e=S("portal_id");e&&"-1"!==e?(C([]),L("classrooms"),x(Number(e))):(_([]),A("classrooms",[]))},[S("portal_id")]),(0,v.useEffect)(()=>{o&&o.length>0&&y(o.map(e=>({label:e.name,value:e.id})))},[o]),(0,v.useEffect)(()=>{h&&h.length>0?C(h.map(e=>({label:e.name,value:Number(e.id)}))):C([])},[h]);let $=(0,v.useCallback)(()=>{if(D&&N.length>0){let e=D.map(e=>Number(e.id));C(N.map(s=>(s.disabled=e.includes(s.value),s)))}},[N,D]);return(0,v.useEffect)(()=>{let e=E.length>=N.length,s=[" ","-1",-1].includes(String(S("classrooms.".concat(H,".id"))));O(()=>!e&&!s)},[null==D?void 0:null===(s=D[H])||void 0===s?void 0:s.id,null==D?void 0:D.length,$]),(0,v.useEffect)(()=>{0===E.length&&(null==D?void 0:D.length)===0&&F({id:-1,days_of_access:null}),$()},[D,f,h]),(0,t.jsx)(g.Z,{children:(0,t.jsxs)("form",{onSubmit:w((e,s)=>{var t;if(s.preventDefault(),0===l.length){Y.Am.error(r("selectAtLeastOneUser"));return}if(!e.portal_id||["-1",-1].includes(e.portal_id)){Y.Am.error(r("selectPortalError"));return}if((null===(t=e.classrooms)||void 0===t?void 0:t.length)===0||!e.classrooms){Y.Am.error(r("selectAtLeastOneClass"));return}let c=null==D?void 0:D.map(e=>e.id);if([-1,"-1"].map(e=>null==c?void 0:c.includes(e)).includes(!0)){Y.Am.error(r("selectClassError"));return}i({users_ids:n?[]:l,classrooms:e.classrooms}).then(()=>{a()})}),children:[(0,t.jsx)(u.Z,{children:(0,t.jsx)(d.Z,{md:6,children:(0,t.jsx)(R.Z,{...k("portal_id"),errors:T.portal_id,title:r("selectPortal"),callback:e=>{A("portal_id",e)},options:b})})}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)("h1",{children:r("selectClasses")}),0!==N.length?f?(0,t.jsx)(eE.s,{}):(0,t.jsxs)(t.Fragment,{children:[E.map((e,s)=>{var l,a,n,i;return(0,t.jsxs)(u.Z,{className:eU().container,children:[(0,t.jsx)(d.Z,{md:5,className:eU().classroomSelect,children:(0,t.jsx)(R.Z,{title:r("class"),...k("classrooms.".concat(s,".id")),errors:null===(a=T.classrooms)||void 0===a?void 0:null===(l=a[s])||void 0===l?void 0:l.id,callback:e=>A("classrooms.".concat(s,".id"),e),options:N})}),(0,t.jsx)(d.Z,{md:5,children:(0,t.jsx)(B.Z,{...k("classrooms.".concat(s,".days_of_access")),title:r("accessTimeDays"),errors:null===(i=T.classrooms)||void 0===i?void 0:null===(n=i[s])||void 0===n?void 0:n.days_of_access,placeholder:r("accessTimePlaceholder"),description:r("accessTimeDescription"),type:"number",min:0})}),(0,t.jsx)(d.Z,{md:2,children:(0,t.jsxs)(Z.Z,{type:"button",className:"danger",onClick:()=>{P(s),$()},disabled:1===E.length,children:[(0,t.jsx)(j.AMf,{}),r("remove")]})})]},e.id)}),(0,t.jsxs)(Z.Z,{type:"button",className:"success",disabled:!U,onClick:()=>F({}),children:[(0,t.jsx)(j.EIY,{}),r("addClass")]})]}):(0,t.jsxs)(eF.Z,{variant:"warning",children:[" ",(0,t.jsx)(j.LL$,{size:20})," ",r("noClassesForPortal")]})]})}),(0,t.jsx)(u.Z,{children:(0,t.jsx)(d.Z,{md:12,children:(0,t.jsxs)(Z.Z,{className:"primary mt-3",isChanging:c,children:[(0,t.jsx)(j.TvB,{})," ",r("submit")]})})})]})})};(a||(a={})).LINK_MANY="link_many";var eO=()=>{var e,s,l,a,n;let{t:N}=(0,p.$)("components_Users_List"),C=(0,c.useRouter)(),{user:A}=(0,U.aC)(),{fetchValidate:M,manualAccess:B}=(0,O.r)(),{users:D,isLoading:R,fetch:V,pagination:z,activeToggle:q,exportStatistics:H}=(0,I.U)(),[Y,G]=(0,v.useState)(null),[K,Q]=(0,v.useState)(null),[W,J]=(0,v.useState)(1),[X,ee]=(0,v.useState)({search:""}),[es,el]=(0,v.useState)([]),[ea,et]=(0,v.useState)(!1),[en,er]=(0,v.useState)(!1),[ei,ec]=(0,v.useState)(!1),[eo,ed]=(0,v.useState)(!1),[eu,em]=(0,v.useState)((null==es?void 0:es.length)===(null==D?void 0:D.length)),eh=(null==es?void 0:es.length)===(null==D?void 0:D.length),e_=ea||R,ep=(null!==(l=null==B?void 0:B.sales_count)&&void 0!==l?l:0)>=(null!==(a=null==B?void 0:B.min_required)&&void 0!==a?a:10),ex=null!==(n=null==B?void 0:B.allow_manual_access)&&void 0!==n&&n,ef=null==A?void 0:null===(e=A.email)||void 0===e?void 0:e.includes("@ticto.com.br"),ev={canShow:ef||ex||ep,isDisabled:!ef&&!ex,tooltip:ef||ex?null:null==B?void 0:B.reason},ej=e=>{V(X,W),e()},eb=e=>{if(C.asPath.includes("?filter_type")){let s="&";s+="page=".concat(e),C.push("".concat(C.asPath.split("&page=")[0]).concat(s))}else{let s="?&";s+="page=".concat(e),C.push("".concat(C.asPath.split("?&page=")[0]).concat(s))}},eg=(e,s)=>{s?el([e.id,...es]):(em(!1),el(es.filter(s=>s!==e.id)))};(0,v.useEffect)(()=>{el([]),C.isReady&&V()},[C]);let ey=e=>{Q(e),er(!0)},eN=e=>{Q(e),ed(!0)},ek=async(e,s)=>{var l;let a=null==e?void 0:null===(l=e.classrooms)||void 0===l?void 0:l.map(e=>({portal_id:e.portal_id}));await q(e,s,a)},ew=async()=>{et(!0),await H([null==K?void 0:K.id]),et(!1)},eS=async()=>{et(!0),await H(eu?[]:es),et(!1)},eA=()=>{if(eu){el([]),em(!1);return}if(eh){em(!0);return}el(D.map(e=>{let{id:s}=e;return s}))};return(0,v.useEffect)(()=>{o.default.rebuild()}),(0,v.useEffect)(()=>{A&&(async()=>{await M(A.id)})()},[A]),(0,v.useEffect)(()=>{(es===[]||(null==es?void 0:es.length)<(null==z?void 0:z.total))&&em(!1)},[es,null==z?void 0:z.total]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{title:N("members.title"),children:ev.canShow&&(0,t.jsx)(b.Z,{I:"create.mozart",a:"accesses",children:(0,t.jsxs)("div",{className:eZ().manualAccess,children:[ev.tooltip&&(0,t.jsx)(_.Hu,{message:ev.tooltip,placement:"top"}),(0,t.jsx)(r(),{href:"/users/new",legacyBehavior:!0,children:(0,t.jsxs)(Z.Z,{className:"primary",isChanging:ea,disabled:ev.isDisabled,children:[(0,t.jsx)(m.zy7,{}),N("members.importNewMembers")]})})]})})}),(0,t.jsx)("div",{className:"container mt-4",children:(0,t.jsxs)(b.Z,{I:"read.mozart",a:"accesses",showUnauthorizedBanner:!0,children:[(0,t.jsx)($,{}),es.length>0&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)(g.Z,{className:eZ().batchActionsContainer,children:[(0,t.jsx)("h1",{children:N("members.batchActions")}),(0,t.jsxs)("div",{className:eZ().batchActionsButtons,children:[(0,t.jsxs)(Z.Z,{className:"primary outline",onClick:()=>{eA()},isChanging:e_,children:[(0,t.jsx)(j.l_A,{}),eu?N("members.uncheckAll"):eh?N("members.checkAll"):N("members.checkAllInPage")]}),(0,t.jsxs)(Z.Z,{className:"primary",onClick:()=>{G("link_many"),ec(!0)},isChanging:e_,children:[(0,t.jsx)(j.EIY,{}),N("members.addToClass")]}),(0,t.jsxs)(Z.Z,{className:"success",onClick:()=>eS(),isChanging:e_,children:[(0,t.jsx)(x.UDv,{}),N("members.exportStatistics")]})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("p",{children:[(0,t.jsxs)("strong",{children:[" ",es.length," "]})," ",N("members.usersSelectedInThisPage")]}),eu&&(0,t.jsxs)("p",{children:[(0,t.jsxs)("strong",{children:[" ",null==z?void 0:z.total," "]})," ",N("members.usersSelectedInTotal")]})]})]})}),(0,t.jsxs)("div",{className:"mt-3",children:[en&&(0,t.jsx)(T.z,{fullScreen:!0,title:N("members.manageUser"),isModalOpen:en,setIsModalOpen:()=>ej(er),children:(0,t.jsx)(eC,{user:K})}),eo&&(0,t.jsxs)(T.z,{fullScreen:!0,title:"".concat(N("members.userProgress")," - ").concat(null==K?void 0:K.name," - ").concat(null==K?void 0:K.email),isModalOpen:eo,setIsModalOpen:()=>ej(ed),children:[(0,t.jsx)(d.Z,{style:{display:"flex",justifyContent:"end"},children:(0,t.jsxs)("button",{className:"green",onClick:()=>ew(),children:[(0,t.jsx)(x.UDv,{}),N("members.exportProgress")]})}),(0,t.jsx)(eT,{user:K})]}),"link_many"===Y&&(0,t.jsx)(T.z,{fullScreen:!0,title:N("members.linkToPortalsAndClasses"),isModalOpen:ei,setIsModalOpen:()=>{ec(!1)},children:(0,t.jsx)(eI,{selectedUsers:es,closeModal:()=>{ec(!1),el([]),G(null)},isEveryUserSelected:eu})}),e_?(0,t.jsx)(E.k,{}):0===D.length?(0,t.jsx)(y.Z,{title:N("members.noClients"),subtitle:N("members.addClient")}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:eZ().usersList,children:[(0,t.jsx)(k,{data:D,columns:[{label:"",render:e=>(0,t.jsx)(L,{checked:es.includes(e.id),name:"checkbox_".concat(e.id),onChange:s=>{eg(e,s.target.checked)},disabled:ea}),width:"2.5rem"},{label:N("members.member"),render:e=>(0,t.jsxs)("div",{className:eZ().details,children:[(0,t.jsx)("div",{className:eZ().avatar,children:(0,t.jsx)(i.ZP,{size:"30",name:e.name})}),(0,t.jsxs)("div",{className:eZ().info,children:[(0,t.jsx)("strong",{children:e.name}),(0,t.jsx)("small",{children:e.email})]})]})},{label:N("members.portals"),render:e=>(0,t.jsx)("div",{className:eZ().accessList,children:e.classrooms&&e.classrooms.length>0&&e.classrooms.map(e=>e.portal_name).reduce(function(e,s){return 0>e.indexOf(s)&&e.push(s),e},[]).map((e,s)=>(0,t.jsxs)("div",{"data-tip":e,children:[(0,t.jsx)(i.ZP,{size:"30","data-for":"tip_".concat(s,"_").concat(e),name:(0,P.gn)(e),className:eZ().access},s),(0,t.jsx)(o.default,{id:"tip_".concat(s,"_").concat(e)})]},s))})},{label:N("members.actions"),buttons:!0,render:e=>(0,t.jsxs)("div",{className:eZ().actions,children:[(0,t.jsxs)(Z.Z,{onClick:()=>ey(e),className:"primary small outline",children:[(0,t.jsx)(f.$Rt,{}),N("members.manage")]}),(0,t.jsxs)(Z.Z,{onClick:()=>eN(e),className:"primary small outline",children:[(0,t.jsx)(h.ok1,{}),N("members.statistics")]}),(0,t.jsx)(F.Z,{noMargin:!0,values:{checked:1,unchecked:0},className:"success",tip:N("members.toggleAccess"),callback:s=>ek(e,s),defaultValue:!(null==e?void 0:e.userBlackList)})]})}]}),(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(d.Z,{md:10}),(0,t.jsx)(d.Z,{md:2,children:(0,t.jsxs)("p",{className:"mt-3 mb-4",children:[N("members.totalMembers"),": ",null==z?void 0:z.total]})})]}),(0,t.jsx)(S.Z,{pagination:z,callback:e=>{eb(e)}})]})})]})]})})]})},eB=()=>(0,t.jsx)(eO,{})},83495:function(e,s,l){"use strict";l.d(s,{LL:function(){return n},R1:function(){return o},_w:function(){return r},c1:function(){return c},fs:function(){return d},tn:function(){return i}});var a=l(70117),t=l(31567);let n=[{label:"Mensal",value:1,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"Bimestral",value:2,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"Trimestral",value:3,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"Quadrimestral",value:4,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"Semestral",value:6,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"Anual",value:12,selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1},{label:"D\xe9bito por Transa\xe7\xe3o",value:"transaction-debit",selectedBackgroundColor:"var(--primary)",innerHeight:20,visible:!1}],r=()=>{let{t:e}=(0,t.$)("utils");return s=>{let l="";switch(s){case 1:l=e("monthly");break;case 2:l=e("bimonthly");break;case 3:l=e("quarterly");break;case 4:l=e("quadmonthly");break;case 6:l=e("semiannual");break;case 12:l=e("annual");break;default:l=""}return l}},i=()=>{let{t:e}=(0,t.$)("utils");return[{label:e("oneMonth"),value:"30"},{label:e("twoMonths"),value:"60"},{label:e("threeMonths"),value:"90"},{label:e("fourMonths"),value:"120"},{label:e("fiveMonths"),value:"150"},{label:e("sixMonths"),value:"180"},{label:e("nineMonths"),value:"270"},{label:e("tenMonths"),value:"304"},{label:e("fifteenMonths"),value:"456"},{label:e("eighteenMonths"),value:"547"},{label:e("twentyMonths"),value:"608"},{label:e("oneYear"),value:"365"},{label:e("twoYears"),value:"730"},{label:e("threeYears"),value:"1095"},{label:e("indefinite"),value:"0"}]},c=[{label:"sunday",value:"Domingo"},{label:"monday",value:"Segunda-Feira"},{label:"tuesday",value:"Ter\xe7a-Feira"},{label:"wednesday",value:"Quarta-Feira"},{label:"thursday",value:"Quinta-Feira"},{label:"friday",value:"Sexta-Feira"},{label:"saturday",value:"S\xe1bado"}],o=(e,s)=>s?e.filter((e,l,a)=>l===a.findIndex(l=>l[s]&&l[s]===e[s])):e.filter(function(s,l){return e.indexOf(s)==l}),d=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l={...e},a={data:[]};for(let[e,n]of Object.entries(l)){var t;a.data.push({value:s?null==n?void 0:n.content_id:n.id,label:s?null==n?void 0:null===(t=n.content)||void 0===t?void 0:t.name:n.name})}return a};a.I.CONTENT_LIST,a.I.MODULE_LIST,a.I.LESSON_LIST},20818:function(e,s,l){"use strict";function a(e){let s="".concat(e||"").charCodeAt(0);return!(!e||Number.isNaN(s))&&!!(s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57)}function t(e,s){return(null==e?void 0:e.length)<s?e:"".concat(null==e?void 0:e.substring(0,s),"...")}l.d(s,{JH:function(){return t},WU:function(){return r},gn:function(){return i}});let n=[{closeTag:"&nbsp;</b> ",openTag:"<b>",wildcard:"*"},{closeTag:"&nbsp;</em>",openTag:"<em>",wildcard:"_"},{closeTag:"</s>",openTag:"<s>",wildcard:"~"}];function r(e,s){return(s||n).reduce((e,s)=>(function(e,s){var l;let t;let n=function(e,s){let l=[];for(let t=0;t<e.length;t+=1)if(e[t]===s){if(l.length%2){if(" "===e[t-1]||a(e[t+1]))break;l.push(t)}else if(void 0===e[t+1]||" "===e[t+1]||a(e[t-1]))break;else l.push(t)}else 10===e[t].charCodeAt(0)&&l.length%2&&l.pop();return l.length%2&&l.pop(),l}(e,s.wildcard);return l=e,t=0,n.forEach((e,a)=>{let n=a%2?s.closeTag:s.openTag,r=e;r+=t,l=l.substr(0,r)+n+l.substr(r+1),t+=n.length-1}),l})(e,s),e).replace(/\n/gi,"<br>")}function i(e){return void 0===e?e:e=(e=e.replace(/-/g,"")).replace(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,"")}},48759:function(e){e.exports={filterBox:"styles_filterBox__CBHx4"}},90505:function(e){e.exports={inputContainer:"styles_inputContainer__HxFiF"}},47157:function(e){e.exports={selectContainer:"styles_selectContainer____3VN",error:"styles_error__rcxuT"}},8598:function(e){e.exports={errorContainer:"styles_errorContainer__yaD8I",error:"styles_error__lkSEs"}},63029:function(e){e.exports={inputContainer:"styles_inputContainer__oG6Ip",noMargin:"styles_noMargin__HuO75",error:"styles_error__0_kP_",description:"styles_description__G2Hll",input:"styles_input__cudZ0",icon:"styles_icon__cFrfw",phone:"styles_phone__St1px",hidden:"styles_hidden__9pEks"}},87122:function(e){e.exports={container:"styles_container__bknLt",pV2:"styles_pV2__N5VGo",radioGroupContainer:"styles_radioGroupContainer__ZbtU4",error:"styles_error__2kuns",radioGroupOption:"styles_radioGroupOption__lDxod"}},87110:function(e){e.exports={selectContainer:"styles_selectContainer__2nP9T",error:"styles_error__C5HLF",select:"styles_select__EMssV",selectMargin:"styles_selectMargin__Dh7Va",description:"styles_description___vDRG"}},31185:function(e){e.exports={box:"styles_box__qcZm3",margin:"styles_margin__wi8sa",icon:"styles_icon__a2ovf",content:"styles_content__K551q"}},61179:function(e){e.exports={paginationContainer:"styles_paginationContainer__o3kza",active:"styles_active__k8mm_",disabled:"styles_disabled__o_YlP"}},544:function(e){e.exports={progress:"styles_progress___0Rb_"}},54077:function(e){e.exports={tableContainer:"styles_tableContainer__WLFZf",button:"styles_button__Y7OiV"}},2800:function(e){e.exports={container:"styles_container__cyShP",classroomSelect:"styles_classroomSelect__R9jW9"}},94357:function(e){e.exports={container:"styles_container__oI4WB",card:"styles_card__EyPy4"}},9816:function(e){e.exports={actions:"styles_actions__Vc7CL",slide:"styles_slide___UT33"}},68604:function(e){e.exports={h1:"styles_h1__AhgEL",table_container:"styles_table_container__44wJB"}},47718:function(e){e.exports={portalsList:"styles_portalsList__0Qqqv",portal:"styles_portal__AiOUh",portalContent:"styles_portalContent__OUqtt",progress:"styles_progress__fEpuJ",classroom:"styles_classroom__8Sbac",actions:"styles_actions__aC4wL"}},61348:function(e){e.exports={manageUserContainer:"styles_manageUserContainer__wmDJl",header:"styles_header__tKxEk",statistics:"styles_statistics__X_K6K",statisticBox:"styles_statisticBox__w0Ozg",user:"styles_user__fBRbV",avatar:"styles_avatar__7A8VF",info:"styles_info__cKTKd",actions:"styles_actions__9W3hC",save:"styles_save__wAYCT",scale:"styles_scale___Z9ia"}},73922:function(e){e.exports={statistics:"styles_statistics__d6grp",manualAccess:"styles_manualAccess__wUnKr",usersList:"styles_usersList__NLD_u",details:"styles_details__AndPe",header:"styles_header__7wAHG",accessList:"styles_accessList__70hB9",access:"styles_access__RAzZl",actions:"styles_actions__CnMuW",batchActionsContainer:"styles_batchActionsContainer__vBPSl",batchActionsButtons:"styles_batchActionsButtons__yb7Na"}}},function(e){e.O(0,[2876,3874,1057,5445,7536,6949,9058,3253,9545,7685,8053,9595,343,44,9808,8899,2888,9774,179],function(){return e(e.s=66249)}),_N_E=e.O()}]);